# SO（混雑外部性）の検証結果（Sioux Falls）

## 概要
本ページでは、Sioux Falls ネットワークに対して  
**混雑外部性のみを考慮した System Optimum（SO）配分**を実装し、  
User Equilibrium（UE）との結果比較を行った。

- 対象ネットワーク：Sioux Falls  
- 配分方法：Logit-SUE（k-shortest paths + MSA）  
- SO の定義：**社会限界費用**に基づく配分  

SO におけるリンク一般化費用は以下で定義される。

\[
c_a^{SO}(x_a) = t_a(x_a) + x_a \frac{dt_a}{dx_a}
\]

BPR 関数は次式を用いた。

\[
t_a(x_a) = t_{0,a}\left(1 + \alpha \left(\frac{x_a}{c_a}\right)^\beta \right)
\]

---

## 評価指標

本検証では、以下の指標を用いて UE と SO を比較した。

- **TotalFlow**  
\[
\sum_a x_a
\]  
ネットワーク全体でのリンク通過回数の総和  
（OD 需要ではなく、リンク通過量の合計）

- **Total Travel Time (TTT)**  
\[
\sum_a x_a \, t_a(x_a)
\]

- **Average Travel Time**  
\[
\frac{\sum_a x_a \, t_a(x_a)}{\sum_a x_a}
\]  
1 台あたりの平均旅行時間

---

## UE と SO（混雑外部性）の比較結果

| 指標 | UE | SO (congestion) | SO − UE | SO / UE |
|---|---:|---:|---:|---:|
| TotalFlow | 8.998×10⁵ | 9.417×10⁵ | +4.19×10⁴ | 1.047 |
| Total Travel Time | 7.615×10⁶ | 7.716×10⁶ | +1.01×10⁵ | 1.013 |
| Average Travel Time | 8.46 | **8.19** | **−0.27** | **0.968** |

---

## 結果の解釈

- SO（混雑外部性）では、  
  **混雑リンクへの集中が緩和され、交通がネットワーク全体に分散**した
- その結果：
  - リンク通過量の総和（TotalFlow）は増加
  - 総旅行時間（TTT）はわずかに増加
  - **1 台あたり平均旅行時間は約 3% 短縮**

本研究では、  
**限界費用に基づく SO を確率的経路選択（Logit-SUE）として実装**している。  
そのため、厳密な総旅行時間最小化は保証されない一方で、  
混雑回避行動による **平均的な移動効率の改善**が確認できた。

---

## 本結果の位置づけ

- 本結果は、今後導入する外部性  
  （CO₂排出量、事故リスク、騒音等）の **ベースライン**と位置づける
- 次段階では、SO の一般化費用を以下のように拡張する予定である。

\[
c_a =
t_a(x_a) + x_a \frac{dt_a}{dx_a}
+ \lambda_{CO_2} CO_{2,a}
+ \lambda_{acc} Risk_a
+ \lambda_{noise} Noise_a
\]

---

## 再現性・実装について

- UE / SO の配分結果はそれぞれ CSV として保存
- 本表は、結果 CSV を用いた **後処理により算出**
- 図示は行っていないが、数値比較により SO の効果は明確に確認できる

---

## 一言まとめ

> 混雑外部性のみを考慮した SO 配分により、  
> ネットワーク全体の交通が分散し、  
> 1 台あたりの平均旅行時間が約 3% 改善することを確認した。
